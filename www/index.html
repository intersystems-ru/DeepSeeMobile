<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>DeepSee Mobile</title>

    <!-- Sets initial viewport load and disables zooming  -->
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">

    <!-- Makes your prototype chrome-less once bookmarked to your phone's home screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="shortcut icon" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png"/>

    <!-- Include the compiled Ratchet CSS -->
    <link href="css/ratchet.min.css" rel="stylesheet">
    <!-- <link href="css/ratchet-theme-ios.min.css" rel="stylesheet">-->
     <link href="css/index.css" rel="stylesheet">

     <link href="css/font-awesome.min.css" rel="stylesheet">

     <!-- Light pivot table -->
    <link href="css/LightPivot.css" rel="stylesheet">
    <script type="text/javascript" src="js/lib/pivot/LightPivotTable.js"></script>
    <script type="text/javascript" src="js/lib/pivot/DataSource.js"></script>
    <script type="text/javascript" src="js/lib/pivot/PivotView.js"></script>
    <script type="text/javascript" src="js/lib/pivot/DataController.js"></script>
    <script type="text/javascript" src="js/lib/pivot/MDXParser.js"></script>


    <script type="text/javascript" src="js/lib/jquery-2.1.1.js"></script>
    <script type="text/javascript" src="js/lib/jquery.textfill.min.js"></script>
    <!--<script type="text/javascript" src="js/lib/pivot.js"></script>-->
    <script type="text/javascript" src="js/lib/underscore.js"></script>
    <script src="js/lib/highcharts.src.js"></script>
    <script src="js/lib/drilldown.js"></script>
    <script src="js/lib/highcharts-more.js"></script>
    <script src="js/lib/solid-gauge.src.js"></script>
    <script src="js/lib/highcharts-3d.js"></script>
    <script src="js/lib/funnel.js"></script>

    <script src="js/lib/jquery.tap.js"></script>
    <script src="js/lib/handlebars-v1.3.0.js"></script>


    <!-- Include the compiled Ratchet JS -->
    <script src="js/lib/ratchet.js"></script>
    <script src="js/lib/cordova.js"></script>

</head>

<body>
    <div id="loginScreen"></div>
    <div id="mainScreen" style="display: none;">
        <!-- Make sure all your bars are the first things in your <body> -->
        <header class="bar bar-nav">
            <h1 class="title" id="mainTitle">InterSystems DeepSeeâ„¢</h1>

            <!-- TODO: make widget page change from popover
            <a href="#widgetList" class="pull-right">
                <span class="icon icon-caret"></span>
            </a>
            -->
            <a id="btnMainBack" class="icon icon-left-nav pull-left" style="display: none"></a>
        </header>

        <!-- Wrap all non-bar HTML in the .content div (this is actually what scrolls) -->
        <div class="content">

        </div>
        <!--content-->

        <nav class="bar bar-tab">
            <a class="tab-item nav-home" href="#">
                <span class="icon fa fa-home"></span>
                <span class="tab-label">Home</span>
            </a>
            <a id="btnMainFilter" class="tab-item" style="display:none;">
            <!--<a id="btnMainFilter" class="tab-item" href="#filters" data-transition="slide-in" style="display:none;">-->
                <span class="icon fa fa-filter"></span>
                <span class="tab-label">Filters</span>
            </a>
            <!--
           <a class="tab-item" href="#" ontouchend="javascript:localStorage.clear();sessionStorage.clear();">
               <span class="icon fa fa-trash" ></span>
               <span class="tab-label">Clear</span>
           </a>
           -->
           <a id="btnMainRefresh" class="tab-item" href="#">
               <span class="icon fa fa-refresh"></span>
               <span class="tab-label">Reload</span>
           </a>
            <a id="btnMainSignOut" class="tab-item" href="#">
                <span class="icon fa fa-sign-out" ></span>
                <span class="tab-label">Sign out</span>
            </a>
       </nav>
   </div>



<div id="filters" class="modal">
    <header class="bar bar-nav">
        <a id="btnFilterBack" class="icon icon-left-nav pull-left"></a>
        <button id="btnFilterAccept" class="btn btn-link btn-nav pull-right" style="display: none">Accept</button>
        <h1 class="title">Filters</h1>
    </header>

    <div class="content" style="left:0px">

    </div>

    <div id="fltBarFooter" class="bar bar-standard bar-footer">
        <button id="btnDismissFilters" class="btn btn-block btn-negative">Dismiss filters</button>
    </div>

</div>

    <!--TODO: make widget page change from popover
    <div id="widgetList" class="popover">
        <ul class="table-view">


        </ul>
    </div>

    -->
<!--    <script src="http://lab.cubiq.org/iscroll/src/iscroll.js"></script>-->
       <script data-main="js/main" src="js/lib/require.js"></script>
<script>
    $("#settings").off('tap').on('tap', function(){
        App.m.publish("viewchange:Settings", {
            holder: "#mainScreen > .content"
        });
    });

    // TODO: move events to another unit
    $("#btnMainBack").off('tap').on('tap', function(){
        if (App.a.activeWidget != null && App.a.activeWidget != undefined) {
            var w = App.a.widgets[App.a.activeWidget];
            if (w) {
                if (w.pivot) {
                    if (w.pivot.DRILL_LEVEL == 0) return;
                    w.pivot.CONTROLS.back();
                    //w.pivot.pivotView._backClickHandler(new Event("click"));
                    if (w.pivot.DRILL_LEVEL == 0) $("#btnMainBack").hide();
                }
            }
        }
    });


    $("#btnMainSignOut").off('tap').on('tap', function(){
        $("#mainScreen").hide();
        $("#loginScreen").show();
        App.m.publish("viewchange:Login", {
            holder: "#loginScreen"
        });
    });

    </script>
</body>

</html>